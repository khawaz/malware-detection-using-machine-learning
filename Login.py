from tkinter import *
from tkinter import messagebox
from PIL import ImageTk, Image
from subprocess import call


# -------- create main screen --------
secreen = Tk()
secreen.title('Login System')
secreen.geometry('800x400+300+200')
secreen.config(bg='#fff')
secreen.resizable(False, False)

frame = Frame(secreen, width=300, height=280, bg="#fff")
frame.place(x=440, y=70)
head = Label(frame, text="Login", fg="#ed4c4c", bg="#fff", font=("Segoe UI Emoji", 25, "bold"))
head.place(x=100, y=5)

# ---------- insert main image & icon --------
img = Image.open('new gui images/login.jpg')
img = img.resize((350, 350))
img = ImageTk.PhotoImage(img)
Label(secreen, image=img, bg='white').place(x=50, y=25)
secreen.iconbitmap("new gui images/Icon.ico")

def server():
    call(["python", "server_GUI.py"])


def main_program():
    secreen.quit()


def Login_command():
    username = user.get()
    password = code.get()

    if username == 'admin' and password == 'admin':
        print('Login Success')
        # main_program()
        secreen.destroy()
        server()


    else:
        print('Login Failed')
        messagebox.showerror("Invalid", "Invalid username or password!")


def on_enter(event):
    user.delete(0, 'end')


#  -------------Entry--------------
def on_leave(event):
    name = user.get()
    if name == '':
        user.insert(0, 'Username')


user = Entry(frame, width=25, fg='black', border=0, bg='#fff', foreground='#777777', font=("Segoe UI Emoji", 10))
user.place(x=30, y=80)
user.insert(0, 'Username')
user.bind('<FocusIn>', on_enter)
user.bind('<FocusOut>', on_leave)
Frame(frame, width=250, height=2, bg="black").place(x=25, y=105)


def on_enter2(event):
    code.delete(0, 'end')
    name = code.get()
    if name == '':
        code.config(show='*')


def on_leave2(event):
    name = code.get()
    if name == '':
        code.insert(0, 'Password')
        code.config(show='')


code = Entry(frame, width=25, fg='black', border=0, bg='#fff', foreground='#777777', font=("Segoe UI Emoji", 10))
code.place(x=30, y=130)
code.insert(0, 'Password')
code.bind('<FocusIn>', on_enter2)
code.bind('<FocusOut>', on_leave2)
Frame(frame, width=250, height=2, bg="black").place(x=25, y=155)

#  -------------Button:--------------
login = Button(frame, width=35, pady=7, text='Login', bg="#ed4c4c", fg="#fff", border=0, cursor="hand2",
               command=Login_command)
login.place(x=25, y=185)
secreen.mainloop()
